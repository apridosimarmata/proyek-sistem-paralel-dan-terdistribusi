const { Client, Location, List, Buttons } = require('./index');


function start() {
    
    let client = new Client({
        puppeteer: {
            headless: false,
            browserURL: 'http://127.0.0.1:9222'
        },
        restartOnAuthFail: true
    })


    client.on('qr', qr => {
        console.log('qr', qr)
    })

    client.on('authenticated', session => {
        console.log('authenticated')
    })

    client.on('ready', () => {
        console.log('ready')
    })

    client.on('message', msg => {
        console.log('message', msg.body)
        if (msg.body === 'sair') {
            client.logout()
        }
    })

    client.on('message_ack', msg => {
        console.log('message_ack', msg.body)
    })

    client.on('disconnected', async msg => {
        console.log('disconnected', this.client)
    })

    client.on('change_state', state => {
        console.log('state', state)
    })

    client.initialize()

}

start()